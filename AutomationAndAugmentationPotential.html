<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: De Toekomst van Werk met AI Agents</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,wght@0,400;0,600;1,400&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --background-main: #f8f9fa;
            --text-dark: #212529;
            --text-muted: #6c757d;
            --primary-blue: #0d6efd;
            --green-zone: #198754;
            --red-zone: #dc3545;
            --orange-zone: #fd7e14;
            --gray-zone: #6c757d;
            --border-light: #dee2e6;
            --shadow-sm: 0 .125rem .25rem rgba(0,0,0,.075);
            --shadow-md: 0 .5rem 1rem rgba(0,0,0,.15);
        }

        body {
            font-family: 'Source Serif 4', serif;
            margin: 0;
            background-color: var(--background-main);
            color: var(--text-dark);
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 50px 20px 30px;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 40px;
        }

        .header h1 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 3.5rem;
            margin: 0;
            font-weight: 700;
        }

        .header p {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 10px auto 0;
            color: var(--text-muted);
        }

        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .insight-card {
            background: white;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 25px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .insight-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .insight-card h3 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.5rem;
            color: var(--primary-blue);
            margin: 0 0 10px 0;
        }

        .insight-card p {
            margin: 0;
            font-size: 1rem;
        }
        
        .ai-term {
            text-decoration: underline dotted var(--primary-blue);
            cursor: help;
            font-weight: 600;
        }

        /* Overlay Styles */
        .overlay {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            animation: fadeIn 0.3s;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .overlay-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            width: 95%;
            max-width: 800px;
            position: relative;
            animation: slideIn 0.4s;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .overlay-content h2 { font-family: 'Roboto Condensed', sans-serif; font-size: 2rem; color: var(--primary-blue); margin-top: 0; }
        .overlay-content p { font-size: 1.1rem; }
        .overlay-content .viz-placeholder {
            width: 100%;
            height: 250px;
            background: #e9ecef url('data:image/svg+xml;charset=UTF-8,%3csvg width="100%25" height="100%25" xmlns="http://www.w3.org/2000/svg"%3e%3crect width="100%25" height="100%25" fill="none" stroke="%23cccccc" stroke-width="3" stroke-dasharray="6%2c 14" stroke-dashoffset="0" stroke-linecap="square"/%3e%3c/svg%3e') center/contain no-repeat;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Roboto Condensed', sans-serif;
            color: #adb5bd;
            font-size: 1.2rem;
        }
        .close-btn { color: #aaa; position: absolute; top: 15px; right: 25px; font-size: 32px; font-weight: bold; cursor: pointer; transition: color 0.2s; }
        .close-btn:hover { color: var(--text-dark); }
        .action-btn { background: var(--primary-blue); color: white; border: none; padding: 12px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: background-color 0.2s; display: block; margin: 20px auto 0; font-family: 'Roboto Condensed', sans-serif; font-size: 1rem; }
        .action-btn:hover { background-color: #0b5ed7; }
        
        /* HAS Section */
        .has-section {
            background: white;
            padding: 30px;
            margin-bottom: 50px;
            border-radius: 8px;
            border: 1px solid var(--border-light);
            text-align: center;
        }
        .has-section h2 { font-family: 'Roboto Condensed', sans-serif; }
        #has-slider { width: 80%; margin: 20px auto; }
        #has-output {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: left;
        }
        #has-output h4 { margin: 0 0 10px 0; color: var(--primary-blue); }

        /* Chat Assistant */
        .ai-chat-container {
            position: fixed; bottom: 20px; right: 20px; width: 350px;
            max-width: 90vw; background-color: white; border-radius: 8px;
            box-shadow: var(--shadow-md); display: flex; flex-direction: column;
            overflow: hidden; transition: height 0.3s ease-in-out; z-index: 999; height: 58px;
            border: 1px solid var(--border-light);
        }
        .ai-chat-header { background-color: #f8f9fa; color: var(--text-dark); padding: 15px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; border-bottom: 1px solid var(--border-light); font-family: 'Roboto Condensed', sans-serif;}
        .ai-chat-content { flex-grow: 1; display: flex; flex-direction: column; min-height: 0; }
        .ai-chat-body { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
        .ai-chat-footer { padding: 10px; flex-shrink: 0; }
        .ai-chat-prompts { padding: 0 10px 10px; display: flex; flex-wrap: wrap; gap: 8px; flex-shrink: 0; }
        .prompt-btn { background: #e9ecef; color: var(--text-dark); border: 1px solid var(--border-light); padding: 5px 12px; font-size: 0.8rem; border-radius: 15px; cursor: pointer; transition: all 0.2s; }
        .prompt-btn:hover { background: #dee2e6; }
        .chat-message { padding: 10px 15px; border-radius: 18px; max-width: 85%; line-height: 1.6; word-wrap: break-word; font-size: 0.95rem; }
        .user-message { background-color: var(--primary-blue); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .bot-message { background-color: #e9ecef; color: var(--text-dark); align-self: flex-start; border-bottom-left-radius: 4px; }
        .chat-input-area { display: flex; gap: 10px; }
        #chat-input { flex-grow: 1; border: 1px solid var(--border-light); border-radius: 20px; padding: 8px 15px; font-size: 0.9rem; }
        #send-btn { background: var(--primary-blue); border: none; color: white; font-weight: bold; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; transition: background-color 0.2s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

    <header class="header">
        <h1>De Toekomst van Werk met AI Agents</h1>
        <p>Een analyse van de Stanford University naar de impact van AI-agents op de Amerikaanse arbeidsmarkt. Ontdek de wensen van werknemers, de capaciteiten van AI en de verschuivingen in cruciale vaardigheden.</p>
    </header>

    <div class="container">
        <h2>Kerninzichten uit het Onderzoek</h2>
        <div class="main-grid">
            <div class="insight-card" data-id="1">
                <h3>1. Automatisering van Routinetaken</h3>
                <p>Werknemers staan positief tegenover het automatiseren van laagwaardige, repetitieve taken. De voornaamste motivatie is het vrijmaken van tijd voor complexer en waardevoller werk.</p>
            </div>
            <div class="insight-card" data-id="2">
                <h3>2. De Desire-Capability Landscape</h3>
                <p>Er is een kloof tussen de taken die werknemers willen automatiseren en wat AI nu kan. Dit leidt tot vier zones, waaronder een <span class="ai-term" data-term="Green Light Zone">"Green Light" Zone</span> en een <span class="ai-term" data-term="Red Light Zone">"Red Light" Zone</span>.</p>
            </div>
            <div class="insight-card" data-id="3">
                <h3>3. Human Agency is Cruciaal</h3>
                <p>De 'Human Agency Scale' (HAS) toont aan dat voor veel taken een samenwerking (partnership) tussen mens en AI wordt verkozen boven volledige automatisering. De mens wil controle houden.</p>
            </div>
            <div class="insight-card" data-id="4">
                <h3>4. Verschuiving van Kernvaardigheden</h3>
                <p>De vraag naar vaardigheden verschuift. Analytische taken worden minder belangrijk, terwijl interpersoonlijke en organisatorische vaardigheden cruciaal worden in een door AI ondersteunde werkomgeving.</p>
            </div>
        </div>

        <div class="has-section">
            <h2>Verken de Human Agency Scale (HAS)</h2>
            <p>Ontdek de 5 niveaus van samenwerking tussen mens en AI, van volledige automatisering tot volledige menselijke controle.</p>
            <input type="range" min="1" max="5" value="3" class="slider" id="has-slider">
            <div id="has-output"></div>
        </div>
    </div>
    
    <div class="overlay" id="info-overlay">
        <div class="overlay-content" id="overlay-content-main"></div>
    </div>
    
    <div class="ai-chat-container" id="ai-chat-container">
        <div class="ai-chat-header" id="ai-chat-header">
            <span>AI Werkplek Assistent</span>
            <span id="chat-toggle-icon">▲</span>
        </div>
        <div class="ai-chat-content">
            <div id="chat-prompts-container" class="ai-chat-prompts"></div>
            <div id="ai-chat-body" class="ai-chat-body">
                <div class="chat-message bot-message">Vragen over de impact van AI op werk? Stel ze hier.</div>
            </div>
            <div class="ai-chat-footer">
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Typ je vraag...">
                    <button id="send-btn">→</button>
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {

    const mainInsights = {
        '1': {
            title: "Inzicht 1: Wens voor Automatisering",
            description: "Voor 46% van de taken staan werknemers open voor automatisering. De voornaamste reden (69% van de gevallen) is niet het elimineren van werk, maar het creëren van ruimte voor 'high-value' werk. Dit suggereert dat AI-agents vooral als ondersteunend worden gezien, niet als vervanging. De wens tot automatisering verschilt sterk per sector: hoog in 'Computer & Mathematical' (54%), laag in 'Arts, Designs, and Media' (17%).",
            vizText: "Visualisatie: % taken met automatiseringswens per sector",
            actionPoints: {
                werknemer: ["Identificeer repetitieve taken in je workflow die je kunt delegeren.", "Gebruik de vrijgekomen tijd om te focussen op strategische en creatieve projecten.", "Communiceer proactief met je manager over hoe AI je rol kan verbeteren."],
                manager: ["Implementeer AI-tools om administratieve lasten te verlichten.", "Herdefinieer rollen rondom 'high-value' output, niet rondom uren.", "Bied training aan over hoe werknemers effectief met AI kunnen samenwerken."],
                beleidsmaker: ["Stimuleer de ontwikkeling van AI die menselijke capaciteiten aanvult, niet vervangt.", "Investeer in omscholingsprogramma's gericht op strategisch en creatief denken.", "Creëer kaders voor 'verantwoorde automatisering'."]
            }
        },
        '2': {
            title: "Inzicht 2: De Desire-Capability Landscape",
            description: "Door de wens van werknemers te combineren met de technologische capaciteiten van AI, ontstaan vier zones. De <span class='ai-term' data-term='Green Light Zone'>'Green Light' Zone</span> (hoge wens, hoge capaciteit) is ideaal voor implementatie. De <span class='ai-term' data-term='Red Light Zone'>'Red Light' Zone</span> (lage wens, hoge capaciteit) vereist voorzichtigheid vanwege weerstand. De <span class='ai-term' data-term='R&D Opportunity Zone'>'R&D Opportunity Zone'</span> (hoge wens, lage capaciteit) is waar toekomstige innovatie het meest gewenst is. Opvallend is dat veel huidige AI-investeringen (41% van YC-startups) zich richten op de 'Low Priority' en 'Red Light' zones.",
            vizText: "Visualisatie: Desire-Capability Landscape (Figuur 5)",
            actionPoints: {
                werknemer: ["Onderzoek AI-tools die vallen in de 'Green Light Zone' voor jouw beroep.", "Geef feedback aan je manager als een tool in de 'Red Light Zone' valt en je werkplezier vermindert.", "Experimenteer met tools uit de 'R&D Zone' om voorop te lopen."],
                manager: ["Prioriteer de implementatie van AI-oplossingen uit de 'Green Light Zone'.", "Wees zeer terughoudend met tools uit de 'Red Light Zone'; weeg de productiviteitswinst op tegen de impact op het moreel.", "Volg ontwikkelingen in de 'R&D Zone' als strategische kansen."],
                beleidsmaker: ["Creëer subsidies voor R&D in de 'R&D Opportunity Zone'.", "Reguleer of ontmoedig de uitrol van AI in de 'Red Light Zone' waar de maatschappelijke impact negatief kan zijn.", "Promoot publiek-private samenwerkingen voor 'Green Light'-projecten."]
            }
        },
        '3': {
            title: "Inzicht 3: De Voorkeur voor Samenwerking",
            description: "De Human Agency Scale (HAS) laat zien dat volledige automatisering (H1) zelden de voorkeur heeft. Het meest gewenste niveau van samenwerking is H3 ('Equal Partnership'), waarin mens en AI samenwerken om een beter resultaat te bereiken dan elk afzonderlijk zou kunnen. Dit benadrukt de wens van werknemers om controle, autonomie en de 'menselijke maat' in hun werk te behouden. Werknemers verkiezen over het algemeen een hoger niveau van menselijke betrokkenheid dan AI-experts momenteel technisch noodzakelijk achten.",
            vizText: "Visualisatie: Dominante HAS-niveaus per beroep (Figuur 6)",
            actionPoints: {
                werknemer: ["Kies voor AI-tools die je als een 'co-piloot' kunt gebruiken, niet als een 'automaat'.", "Behoud altijd de eindverantwoordelijkheid over het werk dat door AI wordt ondersteund.", "Ontwikkel vaardigheden in het effectief 'prompten' en aansturen van AI-partners."],
                manager: ["Selecteer AI-systemen met instelbare autonomie-niveaus.", "Train teams in collaboratieve workflows met AI, niet alleen in het bedienen van de tool.", "Evalueer AI-implementaties op basis van hoe goed ze de menselijke expertise versterken."],
                beleidsmaker: ["Stel eisen aan de 'verklaarbaarheid' (explainability) van AI-beslissingen.", "Ondersteun de ontwikkeling van 'Human-in-the-loop'-systemen.", "Veranker het recht op menselijke controle in wet- en regelgeving voor kritieke sectoren."]
            }
        },
        '4': {
            title: "Inzicht 4: De Grote Verschuiving in Vaardigheden",
            description: "De komst van AI-agents herdefinieert de waarde van vaardigheden. Traditioneel hoogbetaalde, informatieverwerkende vaardigheden (zoals 'Analyseren van Data') dalen in relatief belang. Tegelijkertijd stijgen interpersoonlijke en organisatorische vaardigheden (zoals 'Trainen en Onderwijzen' en 'Organiseren en Plannen') enorm in belang. Deze 'high-agency' taken, waar menselijke interactie en oordeel cruciaal zijn, worden de nieuwe kerncompetenties.",
            vizText: "Visualisatie: Skill-ranking verschuivingen (Figuur 7)",
            actionPoints: {
                werknemer: ["Investeer in je sociale en communicatieve vaardigheden.", "Neem de leiding in projecten en ontwikkel je organisatorische talenten.", "Positioneer jezelf als de 'menselijke interface' tussen technologie en klanten/collega's."],
                manager: ["Pas wervingscriteria aan om meer nadruk te leggen op interpersoonlijke vaardigheden.", "Creëer rollen die coördinatie, coaching en relatiebeheer centraal stellen.", "Beloon en erken medewerkers die uitblinken in samenwerking en communicatie."],
                beleidsmaker: ["Hervorm het onderwijscurriculum met een sterke focus op samenwerking, kritisch denken en ethiek.", "Financier onderzoek naar de effectiviteit van trainingen voor interpersoonlijke vaardigheden.", "Creëer bewustwording over de veranderende waarde van vaardigheden op de arbeidsmarkt."]
            }
        }
    };
    
    const hasData = {
        '1': { title: "H1: Volledige Automatisering", description: "De AI-agent voert de taak volledig zelfstandig uit zonder menselijke tussenkomst.", example: "Voorbeeld: Maandelijkse netwerkrapporten genereren." },
        '2': { title: "H2: Minimaal Toezicht", description: "De AI-agent heeft op enkele cruciale punten menselijke input nodig voor een optimaal resultaat.", example: "Voorbeeld: Een handelsstrategie bedenken op basis van parameters." },
        '3': { title: "H3: Gelijkwaardig Partnerschap", description: "Mens en AI werken nauw samen en vullen elkaar aan. Het gezamenlijke resultaat is beter dan wat ze los van elkaar zouden kunnen bereiken.", example: "Voorbeeld: Samen een complex game-personage ontwerpen." },
        '4': { title: "H4: AI als Assistent", description: "De mens leidt de taak, maar heeft substantiële input van de AI-agent nodig om de taak succesvol af te ronden.", example: "Voorbeeld: Een trainingsprogramma voor nieuwe medewerkers opzetten." },
        '5': { title: "H5: Essentieel Menselijk", description: "De taak kan niet worden voltooid zonder continue, actieve menselijke betrokkenheid en oordeelsvorming. AI speelt een zeer beperkte, ondersteunende rol.", example: "Voorbeeld: Deelnemen aan een online congres om op de hoogte te blijven van trends." }
    };
    
    const glossary = {
        'Green Light Zone': 'Taken waarvoor werknemers een hoge wens tot automatisering hebben én de AI-technologie al ver genoeg is om dit te doen. Dit zijn de ideale kandidaten voor snelle implementatie.',
        'Red Light Zone': 'Taken die AI technisch gezien kan automatiseren, maar waar werknemers dit absoluut niet willen. Implementatie hier kan leiden tot weerstand, demotivatie en verlies van werkplezier.',
        'R&D Opportunity Zone': 'Taken die werknemers graag willen automatiseren, maar waar de technologie nog niet klaar voor is. Dit zijn de belangrijkste gebieden voor toekomstig onderzoek en ontwikkeling.'
    };
    
    const qaPairs = {
        'toekomst': "De toekomst van werk wordt gekenmerkt door een intensieve samenwerking tussen mens en AI. Routinetaken worden geautomatiseerd, waardoor de focus verschuift naar interpersoonlijke, creatieve en strategische vaardigheden.",
        'baan': "AI zal eerder taken binnen banen veranderen dan volledige banen vervangen. De sleutel is aanpassing: werknemers die leren samenwerken met AI en hun interpersoonlijke vaardigheden versterken, vergroten hun waarde.",
        'belangrijkste skill': "De belangrijkste vaardigheden worden interpersoonlijke en organisatorische skills. Denk aan communicatie, coaching, planning en coördinatie. Pure data-analyse wordt minder dominant omdat AI dat kan overnemen.",
        'weerstand': "Werknemers verzetten zich tegen automatisering van taken die ze leuk vinden, die creativiteit vereisen, of waar de 'menselijke maat' cruciaal is (bijv. in de kunst- en designsector). Ze willen controle behouden over hun werk."
    };

    const suggestedPrompts = ["Wat is de toekomst van mijn baan?", "Welke skills worden belangrijk?", "Waarom is er weerstand tegen AI?", "Wat is de 'Green Light Zone'?"];

    // DOM Elements
    const grid = document.querySelector('.main-grid');
    const overlay = document.getElementById('info-overlay');
    const overlayContent = document.getElementById('overlay-content-main');
    const hasSlider = document.getElementById('has-slider');
    const hasOutput = document.getElementById('has-output');
    const chatContainer = document.getElementById('ai-chat-container');
    const chatHeader = document.getElementById('ai-chat-header');
    const chatBody = document.getElementById('ai-chat-body');
    const chatInput = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const chatPromptsContainer = document.getElementById('chat-prompts-container');
    const chatToggleIcon = document.getElementById('chat-toggle-icon');

    // Functions
    function showOverlay(content) {
        overlayContent.innerHTML = content + '<span class="close-btn">×</span>';
        overlay.style.display = 'flex';
        overlay.querySelector('.close-btn').addEventListener('click', hideOverlay);
    }

    function hideOverlay() {
        overlay.style.display = 'none';
    }

    function showMainInsight(id) {
        const data = mainInsights[id];
        let content = `<h2>${data.title}</h2><p>${processGlossaryTerms(data.description)}</p><div class="viz-placeholder">${data.vizText}</div>`;
        content += `<button class="action-btn" data-type="action-points" data-id="${id}">Genereer AI Actiepunten</button>`;
        showOverlay(content);
    }

    function showActionPoints(id) {
        const data = mainInsights[id].actionPoints;
        const content = `
            <h2>Actiepunten</h2>
            <h4>Voor Werknemers:</h4><ul>${data.werknemer.map(li => `<li>${li}</li>`).join('')}</ul>
            <h4>Voor Managers:</h4><ul>${data.manager.map(li => `<li>${li}</li>`).join('')}</ul>
            <h4>Voor Beleidsmakers:</h4><ul>${data.beleidsmaker.map(li => `<li>${li}</li>`).join('')}</ul>`;
        showOverlay(content);
    }
    
    function showGlossaryTerm(termKey) {
        const content = `<h2>${termKey}</h2><p>${glossary[termKey]}</p>`;
        showOverlay(content);
    }
    
    function processGlossaryTerms(text) {
        let processedText = text;
        Object.keys(glossary).forEach(key => {
            const regex = new RegExp(`(${key})`, 'gi');
            processedText = processedText.replace(regex, `<span class="ai-term" data-term="${key}">$1</span>`);
        });
        return processedText;
    }

    function updateHasOutput() {
        const level = hasSlider.value;
        const data = hasData[level];
        hasOutput.innerHTML = `<h4>${data.title}</h4><p>${data.description}<br><em>${data.example}</em></p>`;
    }

    // Chatbot Logic
    function handleUserMessage() {
        const userInput = chatInput.value.trim();
        if (userInput === '') return;
        addMessageToChat(userInput, 'user');
        chatInput.value = '';
        setTimeout(() => {
            const botResponse = getBotResponse(userInput);
            addMessageToChat(botResponse, 'bot');
        }, 600);
    }

    function addMessageToChat(message, sender) {
        const el = document.createElement('div');
        el.className = `chat-message ${sender}-message`;
        el.textContent = message;
        chatBody.appendChild(el);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function getBotResponse(userInput) {
        const lowerInput = userInput.toLowerCase();
        for (const key in qaPairs) {
            if (lowerInput.includes(key)) return qaPairs[key];
        }
        return "Dat is een goede vraag. Het rapport focust op de wensen van werknemers, AI-capaciteiten en de verschuiving van vaardigheden. Kunt u uw vraag hierover specifieker maken?";
    }

    function toggleChat() {
        const isCollapsed = chatContainer.style.height === '55px';
        chatContainer.style.height = isCollapsed ? '650px' : '55px';
        chatToggleIcon.textContent = isCollapsed ? '▼' : '▲';
    }

    function renderSuggestedPrompts() {
        chatPromptsContainer.innerHTML = suggestedPrompts.map(p => `<button class="prompt-btn">${p}</button>`).join('');
    }

    // Event Listeners
    grid.addEventListener('click', (e) => {
        const card = e.target.closest('.insight-card');
        if (card) showMainInsight(card.dataset.id);
    });

    overlay.addEventListener('click', (e) => {
        if (e.target === overlay) hideOverlay();
        if (e.target.dataset.type === 'action-points') showActionPoints(e.target.dataset.id);
        if (e.target.classList.contains('ai-term')) showGlossaryTerm(e.target.dataset.term);
    });
    
    hasSlider.addEventListener('input', updateHasOutput);
    chatHeader.addEventListener('click', toggleChat);
    sendBtn.addEventListener('click', handleUserMessage);
    chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleUserMessage(); });
    chatPromptsContainer.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            chatInput.value = e.target.textContent;
            handleUserMessage();
        }
    });
    document.addEventListener('keydown', (e) => { if (e.key === "Escape") hideOverlay(); });

    // Initialisation
    updateHasOutput();
    renderSuggestedPrompts();
});
</script>

</body>
</html>
